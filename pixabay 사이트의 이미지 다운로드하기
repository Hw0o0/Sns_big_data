from selenium import webdriver
import time
import os
import requests

keyword = "고양이"
cnt = 5
folder_path = "C:\\Users\\UIT801-\\Desktop\\웹크롤링\\"

if not os.path.exists(folder_path):
    os.makedirs(folder_path)

path = "c:/temp/chromedriver_240/chromedriver.exe"
driver = webdriver.Chrome(path)

driver.get("https://pixabay.com/ko/images/search/")
time.sleep(1)

search_bar = driver.find_element(By.NAME,'search')
search_bar.send_keys(keyword)
search_bar.submit()
time.sleep(1)

file_no = 1
count = 1

driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
time.sleep(1)

images = driver.find_elements(By.TAG_NAME,'img')

for i in range(cnt+1):
    image_src = images[i].get_attribute('src')
    if '.jpg' in image_src:
        response = requests.get(image_src)
        with open(os.path.join(folder_path, f'{count}.jpg'), 'wb') as f:
            f.write(response.content)
        count += 1

driver.quit()
